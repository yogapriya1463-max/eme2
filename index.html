<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automated AI Question Paper Generator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo" id="homeBtn">
            ğŸ“š AI Question Generator
        </div>
        <div class="nav-buttons">
            <button id="headerHomeBtn" class="btn btn-secondary" style="display: none;">
                ğŸ  Home
            </button>
            <button id="loginBtn" class="btn btn-primary">
                ğŸ” Login
            </button>
            <button id="registerBtn" class="btn btn-secondary">
                ğŸ“ Register
            </button>
        </div>
    </header>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <span id="toastIcon">â„¹ï¸</span>
        <span id="toastMessage">Notification message</span>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ” Login to Your Account</h2>
                <button class="close-modal" data-modal="loginModal">&times;</button>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email Address</label>
                    <input type="email" id="loginEmail" class="form-control" 
                           placeholder="Enter your email" required>
                    <div class="error-message" id="loginEmailError"></div>
                </div>
                
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" class="form-control" 
                           placeholder="Enter your password" required>
                    <div class="error-message" id="loginPasswordError"></div>
                </div>

                <div class="form-group" style="display: flex; justify-content: space-between; align-items: center;">
                    <label style="margin-bottom: 0;">
                        <input type="checkbox" id="rememberMe" style="margin-right: 0.5rem;">
                        Remember me
                    </label>
                    <a href="#" id="forgotPassword" style="font-size: 0.9rem;">Forgot password?</a>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;" id="loginSubmitBtn">
                    <span id="loginBtnText">Login</span>
                    <span id="loginLoading" class="loading" style="display: none;"></span>
                </button>
            </form>

            <div class="form-switch">
                Don't have an account? <a id="switchToRegister">Register here</a>
            </div>
        </div>
    </div>

    <!-- Registration Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“ Create New Account</h2>
                <button class="close-modal" data-modal="registerModal">&times;</button>
            </div>
            <form id="registerForm">
                <div class="form-group">
                    <label for="regName">Full Name</label>
                    <input type="text" id="regName" class="form-control" 
                           placeholder="Enter your full name" required>
                    <div class="error-message" id="regNameError"></div>
                </div>
                
                <div class="form-group">
                    <label for="regEmail">Email Address</label>
                    <input type="email" id="regEmail" class="form-control" 
                           placeholder="Enter your email" required>
                    <div class="error-message" id="regEmailError"></div>
                </div>
                
                <div class="form-group">
                    <label for="regPassword">Password</label>
                    <input type="password" id="regPassword" class="form-control" 
                           placeholder="Create a password (min. 6 characters)" required
                           minlength="6">
                    <div class="password-strength">
                        <div class="strength-bar" id="passwordStrength"></div>
                    </div>
                    <div class="error-message" id="regPasswordError"></div>
                </div>
                
                <div class="form-group">
                    <label for="regConfirmPassword">Confirm Password</label>
                    <input type="password" id="regConfirmPassword" class="form-control" 
                           placeholder="Confirm your password" required>
                    <div class="error-message" id="regConfirmPasswordError"></div>
                </div>

                <div class="form-group">
                    <label style="display: flex; align-items: flex-start; font-size: 0.9rem;">
                        <input type="checkbox" id="agreeTerms" style="margin-right: 0.5rem; margin-top: 0.2rem;" required>
                        I agree to the <a href="#" style="color: #0366d6;">Terms of Service</a> and <a href="#" style="color: #0366d6;">Privacy Policy</a>
                    </label>
                    <div class="error-message" id="termsError"></div>
                </div>

                <button type="submit" class="btn btn-success" style="width: 100%;" id="registerSubmitBtn">
                    <span id="registerBtnText">Create Account</span>
                    <span id="registerLoading" class="loading" style="display: none;"></span>
                </button>
            </form>

            <div class="form-switch">
                Already have an account? <a id="switchToLogin">Login here</a>
            </div>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgotPasswordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ”‘ Forgot Password</h2>
                <button class="close-modal" data-modal="forgotPasswordModal">&times;</button>
            </div>
            <form id="forgotPasswordForm">
                <div class="form-group">
                    <label for="forgotEmail">Email Address</label>
                    <input type="email" id="forgotEmail" class="form-control" 
                           placeholder="Enter your email" required>
                    <div class="error-message" id="forgotEmailError"></div>
                    <div style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">
                        Enter your email address and we'll send you a password reset link.
                    </div>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;" id="forgotSubmitBtn">
                    <span id="forgotBtnText">Send Reset Link</span>
                    <span id="forgotLoading" class="loading" style="display: none;"></span>
                </button>
            </form>

            <div class="form-switch">
                Remember your password? <a id="switchToLoginFromForgot">Login here</a>
            </div>
        </div>
    </div>
    

    <!-- Main Content -->
    <main>
        <!-- Home Section -->
        <section id="homeSection" class="section active">
            <div class="home-container">
                <div class="hero">
                    <h1>Automated AI Question Paper Generator</h1>
                    <p>Create professional question papers in seconds. Customize subjects, topics, difficulty levels, and question types to generate perfect assessments.</p>
                </div>

                <div id="loginRequired" class="login-required">
                    <h2>ğŸ”’ Login Required</h2>
                    <p>Please register and login to access the question paper generator and answer validation tools.</p>
                    <div class="action-buttons" style="margin-top: 2rem;">
                        <button id="loginFromHome" class="btn btn-primary">ğŸ” Login</button>
                        <button id="registerFromHome" class="btn btn-success">ğŸ“ Register</button>
                    </div>
                </div>

                <div id="welcomeSection" class="login-required" style="display: none;">
                    <h2>Welcome back! ğŸ‘‹</h2>
                    <p>You're now logged in. Access all features to create and manage question papers.</p>
                    <div class="action-buttons" style="margin-top: 2rem;">
                        <button id="startGenerating" class="btn btn-primary">ğŸ“„ Generate Question Paper</button>
                        <button id="startGeneratingMaterial" class="btn btn-primary">ğŸ§¾ Generate Material</button>
                        <button id="startValidating" class="btn btn-success">âœ“ Validate Answer Papers</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Generate Paper Section -->
        <section id="generateSection" class="section">
            <div class="home-container">
                <div class="hero">
                    <h1>Generate Question Paper</h1>
                    <p>Configure your question paper settings and let AI generate a perfect assessment.</p>
                    
                    <!-- Section Navigation for Generate Page -->
                    <div class="section-navigation">
                        <button id="homeFromGenerate" class="btn btn-secondary">ğŸ  Home</button>
                        <button id="generateMaterialFromGenerate" class="btn btn-primary">ğŸ§¾ Generate Material</button>
                        <button id="validateFromGenerate" class="btn btn-success">âœ“ Validate Answers</button>
                    </div>
                </div>
                
                <!-- Content for Generate Page -->
                <div class="form-container">
                    <h3 style="color: #0366d6; margin-bottom: 1.5rem;">ğŸ“‹ Question Paper Configuration</h3>
                    
                    <!-- Paper Details Form -->
                    <form id="questionPaperForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="paperTitle">ğŸ“ Paper Title</label>
                                <input type="text" id="paperTitle" class="form-control" 
                                       placeholder="Enter paper title (e.g., Final Exam 2024)" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="paperSubject">ğŸ“š Subject</label>
                                <select id="paperSubject" class="form-control" required>
                                    <option value="">Select Subject</option>
                                    <option value="mathematics">Mathematics</option>
                                    <option value="physics">Physics</option>
                                    <option value="chemistry">Chemistry</option>
                                    <option value="biology">Biology</option>
                                    <option value="english">English</option>
                                    <option value="history">History</option>
                                    <option value="geography">Geography</option>
                                    <option value="computer_science">Computer Science</option>
                                    <option value="economics">Economics</option>
                                    <option value="business_studies">Business Studies</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="paperDate">ğŸ“… Exam Date</label>
                                <input type="date" id="paperDate" class="form-control" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="paperTime">â° Exam Duration (minutes)</label>
                                <input type="number" id="paperTime" class="form-control" 
                                       placeholder="Enter duration in minutes" min="30" max="300" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="totalMarks">ğŸ¯ Total Marks</label>
                                <input type="number" id="totalMarks" class="form-control" 
                                       placeholder="Enter total marks" min="10" max="200" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>â“ Question Types</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="qtype_mcq" value="mcq" checked>
                                    <label for="qtype_mcq">Multiple Choice (MCQ)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="qtype_oneword" value="oneword">
                                    <label for="qtype_oneword">One Word Answer</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="qtype_short" value="short">
                                    <label for="qtype_short">Short Answer</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="qtype_long" value="long">
                                    <label for="qtype_long">Long Answer</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="qtype_essay" value="essay">
                                    <label for="qtype_essay">Essay Type</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="qtype_truefalse" value="truefalse">
                                    <label for="qtype_truefalse">True/False</label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="difficultyLevel">ğŸ“Š Difficulty Level</label>
                            <select id="difficultyLevel" class="form-control" required>
                                <option value="easy">Easy</option>
                                <option value="medium" selected>Medium</option>
                                <option value="hard">Hard</option>
                                <option value="mixed">Mixed Difficulty</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="paperTopics">ğŸ“– Topics (comma separated)</label>
                            <textarea id="paperTopics" class="form-control" 
                                      rows="3" 
                                      placeholder="Enter topics, separated by commas (e.g., Algebra, Geometry, Calculus)"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="additionalInstructions">ğŸ“ Additional Instructions</label>
                            <textarea id="additionalInstructions" class="form-control" 
                                      rows="3" 
                                      placeholder="Any special instructions for the question paper"></textarea>
                        </div>

                        <!-- Action Buttons -->
                        <div class="action-container">
                            <div class="file-upload" id="uploadTemplateBtn">
                                <div style="pointer-events: none;">
                                    <div>ğŸ“¤</div>
                                    <h4>Upload Template</h4>
                                    <p>Upload existing question paper template (Optional)</p>
                                    <p style="font-size: 0.9rem; color: #666;">Supported: PDF, DOC, DOCX</p>
                                </div>
                                <input type="file" id="templateUpload" accept=".pdf,.doc,.docx">
                            </div>

                            <div style="display: flex; gap: 1rem;">
                                <button type="button" id="generatePaperBtn" class="btn btn-primary">
                                    ğŸš€ Generate Paper
                                </button>
                                <button type="button" id="downloadPaperBtn" class="btn btn-success" disabled>
                                    â¬‡ï¸ Download PDF
                                </button>
                                <button type="button" id="resetFormBtn" class="btn btn-warning">
                                    ğŸ”„ Reset Form
                                </button>
                            </div>
                        </div>
                    </form>

                    <!-- Preview Section -->
                    <div id="paperPreview" class="preview-container" style="display: none;">
                        <h4>ğŸ“„ Generated Paper Preview</h4>
                        <div id="previewContent" style="background: white; padding: 1.5rem; border-radius: 8px; border: 1px solid #dee2e6;">
                            <!-- Preview content will be inserted here -->
                        </div>
                    </div>
                </div>

                <!-- Bottom Navigation -->
                <div class="section-navigation" style="margin-top: 2rem;">
                    <button id="bottomHomeFromGenerate" class="btn btn-secondary">ğŸ  Home</button>
                    <button id="bottomValidateFromGenerate" class="btn btn-success">âœ“ Validate Answers</button>
                        <button id="bottomGenerateMaterialFromGenerate" class="btn btn-primary">ğŸ§¾ Generate Material</button>
                </div>
            </div>
        </section>

        <!-- Generate Material Page -->
        <section id="generateMaterialSection" class="section">
            <div class="home-container">
                <div class="hero">
                    <h1>Generate Study Material</h1>
                    <p>Upload a file (PDF, DOCX, TXT, or image) to generate a topic summary and short notes.</p>
                    <div class="section-navigation">
                        <button id="homeFromGenerateMaterial" class="btn btn-secondary">ğŸ  Home</button>
                        <button id="generateFromGenerateMaterial" class="btn btn-primary">ğŸ“„ Generate Papers</button>
                        <button id="validateFromGenerateMaterial" class="btn btn-success">âœ“ Validate Answers</button>
                    </div>
                </div>
                <div class="form-container">
                    <h3 style="color: #0366d6; margin-bottom: 1.5rem;">ğŸ“š Generate Short Notes / Summary</h3>
                    <div class="form-group">
                        <label>ğŸ“¤ Upload Material</label>
                        <div class="file-upload" id="uploadMaterialBtn">
                            <div style="pointer-events: none;">
                                <div>ğŸ“</div>
                                <h4>Upload file</h4>
                                <p>Upload your material (PDF, DOCX, TXT, JPG, PNG)</p>
                            </div>
                            <input type="file" id="materialUpload" accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png">
                        </div>
                        <div id="materialFileInfo" style="margin-top: 0.5rem; display: none;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; background: #e7f1ff; border-radius: 6px; border-left: 4px solid #0366d6;">
                                <span style="font-size: 1.2rem;">ğŸ“„</span>
                                <div>
                                    <div style="font-weight: 600;" id="materialFileName">Uploaded file</div>
                                    <div style="font-size: 0.85rem; color: #666;" id="materialFileSize"></div>
                                </div>
                                <button id="removeMaterialBtn" style="margin-left: auto; background: none; border: none; color: #dc3545; cursor: pointer;" title="Remove material">ğŸ—‘ï¸</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="summaryLength">Summary length</label>
                            <select id="summaryLength" class="form-control">
                                <option value="short">Short (3-4 lines)</option>
                                <option value="medium" selected>Medium (1-2 paragraphs)</option>
                                <option value="long">Long (detailed summary)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="notesCount">Number of bullet notes</label>
                            <input type="number" id="notesCount" class="form-control" value="5" min="1" max="20">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ğŸ“˜ Material Type</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="mt_oneword" value="oneword">
                                    <label for="mt_oneword">One Word</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="mt_summary" value="summary" checked>
                                    <label for="mt_summary">Summary</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="mt_2marks" value="2marks">
                                    <label for="mt_2marks">2 Marks Question</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="mt_long" value="long">
                                    <label for="mt_long">Long Question</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="mt_essay" value="essay">
                                    <label for="mt_essay">Essay Type</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="materialDifficulty">Difficulty Level</label>
                            <select id="materialDifficulty" class="form-control">
                                <option value="easy">Easy</option>
                                <option value="medium" selected>Medium</option>
                                <option value="hard">Hard</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="materialTopics">ğŸ“– Topics (comma separated)</label>
                            <input type="text" id="materialTopics" class="form-control" placeholder="e.g., Algebra, Calculus">
                        </div>
                        <div class="form-group">
                            <label for="materialInstructions">ğŸ“ Additional Instructions</label>
                            <textarea id="materialInstructions" class="form-control" rows="2" placeholder="Any specific instructions for the material..."></textarea>
                        </div>
                    </div>
                    <div class="action-container">
                        <div style="display:flex; gap:1rem;">
                            <button id="generateMaterialBtn" class="btn btn-primary">ğŸ§¾ Generate Material</button>
                            <button id="resetMaterialBtn" class="btn btn-warning">ğŸ”„ Reset</button>
                        </div>
                        <button id="downloadMaterialBtn" class="btn btn-success" disabled>â¬‡ï¸ Download Summary</button>
                    </div>

                    <div id="materialPreview" class="preview-container" style="display:none; margin-top:1.5rem;">
                        <h4>ğŸ“š Generated Material</h4>
                        <div id="materialPreviewContent" style="background:white; padding:1rem; border-radius:6px; border: 1px solid #dee2e6;">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Validate Answers Section -->
        <section id="validateSection" class="section">
            <div class="home-container">
                <div class="hero">
                    <h1>Validate Answer Papers</h1>
                    <p>Upload answer key and answer sheets for AI-powered validation and grading.</p>
                    
                    <!-- Section Navigation for Validate Page -->
                    <div class="section-navigation">
                        <button id="homeFromValidate" class="btn btn-secondary">ğŸ  Home</button>
                        <button id="generateFromValidate" class="btn btn-primary">ğŸ“„ Generate Papers</button>
                        <button id="generateMaterialFromValidate" class="btn btn-primary">ğŸ§¾ Generate Material</button>
                    </div>
                </div>
                
                <!-- Content for Validate Page -->
                <div class="form-container">
                    <h3 style="color: #0366d6; margin-bottom: 1.5rem;">âœ“ Answer Paper Validation with Answer Key</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="answerPaperTitle">ğŸ“ Answer Paper Title</label>
                            <input type="text" id="answerPaperTitle" class="form-control" 
                                   placeholder="Enter answer paper title" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="studentCount">ğŸ‘¥ Number of Students</label>
                            <input type="number" id="studentCount" class="form-control" 
                                   placeholder="Number of answer sheets" min="1" max="100" required>
                        </div>
                    </div>

                    <!-- Answer Key Upload Section -->
                    <div class="form-group">
                        <label>ğŸ”‘ Upload Answer Key (Required)</label>
                        <div class="file-upload" id="uploadAnswerKeyBtn">
                            <div style="pointer-events: none;">
                                <div>ğŸ—ï¸</div>
                                <h4>Upload Answer Key</h4>
                                <p>Upload the correct answer key for validation</p>
                                <p style="font-size: 0.9rem; color: #666;">Supported: PDF, DOC, DOCX, TXT</p>
                            </div>
                            <input type="file" id="answerKeyUpload" accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png">
                        </div>
                        <div id="answerKeyInfo" style="margin-top: 0.5rem; display: none;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; background: #e7f1ff; border-radius: 6px; border-left: 4px solid #0366d6;">
                                <span style="font-size: 1.2rem;">ğŸ—ï¸</span>
                                <div>
                                    <div style="font-weight: 600;" id="answerKeyName">Answer Key</div>
                                    <div style="font-size: 0.85rem; color: #666;" id="answerKeySize"></div>
                                </div>
                                <button id="removeAnswerKeyBtn" style="margin-left: auto; background: none; border: none; color: #dc3545; cursor: pointer;" title="Remove answer key">ğŸ—‘ï¸</button>
                            </div>
                        </div>
                    </div>

                    <!-- Answer Sheets Upload Section -->
                    <div class="form-group">
                        <label>ğŸ“¤ Upload Answer Sheets</label>
                        <div class="file-upload" id="uploadAnswersBtn">
                            <div style="pointer-events: none;">
                                <div>ğŸ“</div>
                                <h4>Upload Answer Sheets</h4>
                                <p>Click to upload answer sheets for validation</p>
                                <p style="font-size: 0.9rem; color: #666;">Supported: PDF, DOC, DOCX, Images</p>
                            </div>
                            <input type="file" id="answersUpload" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" multiple>
                        </div>
                        <div id="fileList" style="margin-top: 1rem;"></div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-container">
                        <button type="button" id="startValidationBtn" class="btn btn-primary" disabled>
                            âœ… Start Validation with Answer Key
                        </button>
                        <button type="button" id="downloadResultsBtn" class="btn btn-success" disabled>
                            ğŸ“Š Download Results
                        </button>
                        <button type="button" id="clearFilesBtn" class="btn btn-warning">
                            ğŸ—‘ï¸ Clear All Files
                        </button>
                         <button type="button" id="resetValidateFormBtn" class="btn btn-warning">
                            ğŸ”„ Reset Form
                            </button>
                    </div>

                    <!-- Validation Progress -->
                    <div id="validationProgress" style="display: none; margin-top: 1.5rem;">
                        <h4 style="color: #0366d6; margin-bottom: 1rem;">ğŸ“Š Validation Progress</h4>
                        <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; border: 1px solid #dee2e6;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>Processing...</span>
                                <span id="progressPercent">0%</span>
                            </div>
                            <div style="height: 8px; background: #e9ecef; border-radius: 4px; overflow: hidden;">
                                <div id="progressBar" style="height: 100%; background: #0366d6; width: 0%; transition: width 0.3s;"></div>
                            </div>
                            <div id="progressStatus" style="margin-top: 0.5rem; font-size: 0.9rem; color: #666;">
                                Waiting to start...
                            </div>
                        </div>
                    </div>

                    <!-- Results Preview -->
                    <div id="validationResults" class="preview-container" style="display: none;">
                        <h4>ğŸ“Š Validation Results with Answer Key</h4>
                        <div id="resultsContent" style="background: white; padding: 1.5rem; border-radius: 8px; border: 1px solid #dee2e6;">
                            <!-- Results will be inserted here -->
                        </div>
                    </div>
                </div>

                <!-- Bottom Navigation -->
                <div class="section-navigation" style="margin-top: 2rem;">
                    <button id="bottomHomeFromValidate" class="btn btn-secondary">ğŸ  Home</button>
                    <button id="bottomGenerateFromValidate" class="btn btn-primary">ğŸ“„ Generate Papers</button>
                </div>
            </div>
        </section>
    </main>

    <script src="app.js"></script>
</body>
</html>